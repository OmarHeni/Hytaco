<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Visual Admin Dashboard - Preferences</title>
    <meta name="description" content="">
    <meta name="author" content="templatemo">
    <!--
    Visual Admin Template
    https://templatemo.com/tm-455-visual-admin
    -->
    <link rel="stylesheet" href="{{ asset('bundles/mercuryseriesflashy/css/flashy.css') }}">

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,700' rel='stylesheet' type='text/css'>
    <link href="{{asset("css/font-awesome.min.css")}}" rel="stylesheet">
    <link href="{{ asset("css/bootstrap.min.css") }}" rel="stylesheet">
    <link href="{{asset("css/templatemo-style.css")}}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/core@4.1.0/main.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@4.1.0/main.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/timegrid@4.1.0/main.min.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>


    <![endif]-->

</head>
<body>
<!-- Left column -->

<div class="templatemo-flex-row">
    <div class="templatemo-sidebar">
        <header class="templatemo-site-header">

        </header>

        <div class="profile-photo-container" align="center">
            <img style="height: 200px; width: 200px" src="images/properties/{{ us.imageName }}" alt="Bicycle" class="img-circle img-thumbnail">
            <div class="profile-photo-overlay"></div>
        </div>
        <!-- Search box -->
        <form class="templatemo-search-form" role="search">
            <div class="input-group">
                <button type="submit" class="fa fa-search"></button>
                <input type="text" class="form-control" placeholder="Search" name="srch-term" id="srch-term">
            </div>
        </form>
        <div class="mobile-menu-icon">
            <i class="fa fa-bars"></i>
        </div>
        <nav class="templatemo-left-nav">
            <ul>
                <li><a href="/datav"><i class="fa fa-bar-chart fa-fw"></i>Statistiques</a></li>
                <li><a href="/map"><i class="fa fa-map-marker fa-fw"></i>Maps</a></li>
                <li><a href="/utilisateur"><i class="fa fa-user fa-fw"></i>utilisateurs</a></li>
                <li><a href="/programmes"><i class="fa fa-flag fa-fw"></i>programmes</a></li>
                <li><a href="/evenement"><i class="fa fa fa-calendar fa-fw"></i>evenements</a></li>
                <li><a href="/sponsor"><i class="fa fa-building fa-fw"></i>sponsors</a></li>
                <li><a href="/afficheP"><i class="fa fa-comments fa-fw"></i>Proposition</a></li>
                <li><a href="/publicite"><i class="fa fa-desktop"></i>Publicite</a></li>
                <li><a href="/locaux"><i class="fa fa-location-arrow fa-fw"></i>locaux</a></li>
                <li><a href="/categorie"><i class="fa fa-tags fa-fw"></i>categories</a></li>
                <li><a href="/produit"><i class="fa fa-tags fa-fw"></i>produits</a></li>
                <li><a href="/commandes"><i class="fa fa-cart-arrow-down fa-fw"></i>commandes</a></li>
                <li><a href="/livraison"  class="active"><i class="fa fa-truck fa-fw"></i>livraisons</a></li>
                <li><a href="/livreur"><i class="fa fa-male fa-fw"></i>livreurs</a></li>
                <li><a href="/transporteurs"><i class="fa fa-male fa-fw"></i>transporteur</a></li>
                <li><a href="/alerts"><i class="fa fa-bullhorn fa-fw"></i>alertes</a></li>
                <li><a href="/reclamation"><i class="fa fa-comments fa-fw"></i>reclamations</a></li>
                <li><a href="/logout"><i class="fa fa-eject fa-fw"></i>Sign Out</a></li>
            </ul>
        </nav>
    </div>
    <!-- Main content -->
    <div class="templatemo-content col-1 light-gray-bg">
        <div class="templatemo-top-nav-container">
            <div class="row">
                <nav class="templatemo-top-nav col-lg-12 col-md-12">
                    <ul class="text-uppercase">

                        <li><a href="/blog" class="active">
                                {{ us.prenom }}
                                {{ us.nom }}
                                <link rel="stylesheet" href="{{ asset('bundles/mercuryseriesflashy/css/flashy.css') }}">
                            </a></li>
                        <li><a href="/profile">Profile</a></li>
                        <li><a href="/listutili">Administrateurs</a></li>
                        <li><a href="/datav">Statistiques</a></li>
                        <li><a href="/accueil">Campi</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="templatemo-content-container">
            <div class="templatemo-content-widget no-padding">
                <div class="panel panel-default table-responsive">
                    <form action="#" method="get">
                        <div class="input-group">
                            <!-- USE TWITTER TYPEAHEAD JSON WITH API TO SEARCH -->
                            <input class="form-control" id="system-search" name="q" placeholder="Search for" required>
                            <span class="input-group-btn">
                                          <button type="submit" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></button>
                                            </span>
                        </div>
                    </form>
                    <table class="table table-striped table-bordered templatemo-user-table table-list-search">
                        <thead>
                        <tr>
                            <td><a href="" class="white-text templatemo-sort-by">#ID <span class="caret"></span></a></td>
                            <td><a href="" class="white-text templatemo-sort-by">Date <span class="caret"></span></a></td>
                            <td><a href="" class="white-text templatemo-sort-by">Adresse <span class="caret"></span></a></td>
                            <td><a href="" class="white-text templatemo-sort-by">Livreur <span class="caret"></span></a></td>
                            <td>Edit</td>
                            <td>Delete</td>
                        </tr>
                        </thead>
                        {%for li in livr%}
                            <tr>
                                <td>{{ li.id }}</td>
                                <td> {{ li.datelivraison|date('Y-m-d')}}</td>
                                <td> {{ li.adresse }}</td>
                                <td> {% for livr in li.livreur %}
                                    {{  livr.nom }}
                                {% endfor %}
                                </td>
                                </td>
                                <td><a href="/ModifierLivraisons/{{li.id}}" class="templatemo-edit-btn">Edit</a></td>
                                <td><a href={{  path("deletelivraisons",{'id':li.id})}}>Delete</a></td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>

            <div class="templatemo-content-container">
                <div class="templatemo-content-widget white-bg">
                    {{ form_start(form) }}
                    <h2 class="margin-bottom-10" align="center">Ajouter une livraison</h2>
                        <div class="row form-group">
                            <div class="col-lg-6 col-md-6 form-group">
                                <label for="inputFirstName">Date</label>
                                {#  <input type="text" name="datelivraison" class="form-control" id="inputFirstName" placeholder="datelivraison"> #}
                                {{ form_widget(form.datelivraison,{'attr': {'class': 'form-control','placeholder':'datelivraison'}}) }}
                            </div>

                        </div>

                        <div class="row form-group">
                            <div class="col-lg-6 col-md-6 form-group">
                                <label for="inputFirstName">Adresse</label>
                                {#  <input type="text" name="adresse" class="form-control" id="inputFirstName" placeholder="adresse"> #}
                                {{ form_widget(form.adresse,{'attr': {'class': 'form-control','placeholder':'adresse'}}) }}
                            </div>
                        </div>
                    <div class="row form-group">
                        <div class="col-lg-6 col-md-6 form-group">
                            <label for="inputFirstName">Livreur</label>
                            {#  <input type="text" name="adresse" class="form-control" id="inputFirstName" placeholder="adresse"> #}
                            {{ form_widget(form.livreur,{'attr': {'class': 'form-control'}}) }}
                        </div>
                    </div>

                        <div class="row form-group">
                            <div class="col-lg-6 col-md-6 form-group">
                                <label class="control-label templatemo-block">Livreur</label>
                                <select class="form-control">
                                    <option value="html">1</option>

                                </select>
                            </div>

                            <div class="form-group text-right">
                                <button type="submit" class="templatemo-blue-button">Ajouter</button>
                            </div>
                </div>
            </div>

                {{ form_end(form) }}
                <div id="calendar-holder"></div>

        </div>
            <div class="templatemo-flex-row flex-content-row templatemo-overflow-hidden"> <!-- overflow hidden for iPad mini landscape view-->
                <div class="col-1 templatemo-overflow-hidden">
                    <div class="templatemo-content-widget white-bg templatemo-overflow-hidden">
                        <i class="fa fa-times"></i>
                        <div class="templatemo-flex-row flex-content-row">
                            <div class="col-1 col-lg-6 col-md-12">
                                <h2 class="text-center">Gestion des evenements</h2>
                                <div id="pie_chart_div" class="templatemo-chart"></div> <!-- Pie chart div -->
                            </div>
                            <div class="col-1 col-lg-6 col-md-12">
                                <h2 class="text-center">Gestion des evenements</h2>
                                <div id="bar_chart_div" class="templatemo-chart"></div> <!-- Bar chart div -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        <footer class="text-right">
            <p>Copyright &copy; 2021 Hytaco</p>
        </footer>
    </div>
</div>
</div>


<!-- JS -->
<script src="js/jquery-1.11.2.min.js"></script>      <!-- jQuery -->
<script src="js/jquery-migrate-1.2.1.min.js"></script> <!--  jQuery Migrate Plugin -->
<script src="https://www.google.com/jsapi"></script> <!-- Google Chart -->
<script>
    /* Google Chart
    -------------------------------------------------------------------*/
    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
   /* function drawChart() {
        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'place');
        data.addRows([

        ]);

        // Set chart options
        var options = {'title':{% trans %}'Statistics of events by number of places'{% endtrans %}};

        // Instantiate and draw our chart, passing in some options.
        var pieChart = new google.visualization.PieChart(document.getElementById('pie_chart_div'));
        pieChart.draw(data, options);

        var barChart = new google.visualization.BarChart(document.getElementById('bar_chart_div'));
        barChart.draw(data, options);
    }

    $(document).ready(function(){
        if($.browser.mozilla) {
            //refresh page on browser resize
            // http://www.sitepoint.com/jquery-refresh-page-browser-resize/
            $(window).bind('resize', function(e)
            {
                if (window.RT) clearTimeout(window.RT);
                window.RT = setTimeout(function()
                {
                    this.location.reload(false); /* false to get page from cache
                }, 200);
            });
        } else {
            $(window).resize(function(){
                drawChart();
            });
        }
    });

</script>

<!-- JS -->
<script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>        <!-- jQuery -->
<script type="text/javascript" src="js/bootstrap-filestyle.min.js"></script>  <!-- http://markusslima.github.io/bootstrap-filestyle/ -->
<script type="text/javascript" src="js/templatemo-script.js"></script>        <!-- Templatemo Script -->

{% block javascripts %}
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@4.1.0/main.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/interaction@4.1.0/main.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@4.1.0/main.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/timegrid@4.1.0/main.min.js"></script>
{% endblock %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        var calendarEl = document.getElementById('calendar-holder');

        var calendar = new FullCalendar.Calendar(calendarEl, {
            defaultView: 'dayGridMonth',
            editable: true,
            eventSources: [
                {
                    url: "/fc-load-events",
                    method: "POST",
                    extraParams: {
                        filters: JSON.stringify({})
                    },
                    failure: () => {
                        // alert("There was an error while fetching FullCalendar!");
                    },
                },
            ],
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay',
            },
            plugins: [ 'interaction', 'dayGrid', 'timeGrid' ], // https://fullcalendar.io/docs/plugin-index
            timeZone: 'UTC',
        });
        calendar.render();
    });
</script>
<script>
    $(document).ready(function() {
        var activeSystemClass = $('.list-group-item.active');

        //something is entered in search form
        $('#system-search').keyup( function() {
            var that = this;
            // affect all table rows on in systems table
            var tableBody = $('.table-list-search tbody');
            var tableRowsClass = $('.table-list-search tbody tr');
            $('.search-sf').remove();
            tableRowsClass.each( function(i, val) {

                //Lower text for case insensitive
                var rowText = $(val).text().toLowerCase();
                var inputText = $(that).val().toLowerCase();
                if(inputText != '')
                {
                    $('.search-query-sf').remove();
                    tableBody.prepend('<tr class="search-query-sf"><strong>Searching for: "'
                        + $(that).val()
                        + '"</strong></tr>');
                }
                else
                {
                    $('.search-query-sf').remove();
                }

                if( rowText.indexOf( inputText ) == -1 )
                {
                    //hide rows
                    tableRowsClass.eq(i).hide();

                }
                else
                {
                    $('.search-sf').remove();
                    tableRowsClass.eq(i).show();
                }
            });
            //all tr elements are hidden
            if(tableRowsClass.children(':visible').length == 0)
            {
                tableBody.append('<td class="search-sf">No entries found.</td>');
            }
        });
    });


</script>
<script src="//code.jquery.com/jquery.js"></script>
<script src="{{ asset('bundles/mercuryseriesflashy/js/flashy.js') }}"></script>
{{ include('@MercurySeriesFlashy/flashy.html.twig') }}
</body>
</html>
