<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Visual Admin Dashboard - Preferences</title>
    <meta name="description" content="">
    <meta name="author" content="templatemo">
    <!--
    Visual Admin Template
    https://templatemo.com/tm-455-visual-admin
    -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,700' rel='stylesheet' type='text/css'>
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/templatemo-style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>
<body>
<!-- Left column -->
<div class="templatemo-flex-row">
    <div class="templatemo-sidebar">
        <header class="templatemo-site-header">
        </header>

        <div class="profile-photo-container" align="center">
            <img src="images/profile-photo.jpg" alt="Bicycle" class="img-circle img-thumbnail">
            <div class="profile-photo-overlay"></div>
        </div>
        <!-- Search box -->
        <form class="templatemo-search-form" role="search">
            <div class="input-group">
                <button type="submit" class="fa fa-search"></button>
                <input type="text" class="form-control" placeholder="Search" name="srch-term" id="srch-term">
            </div>
        </form>
        <div class="mobile-menu-icon">
            <i class="fa fa-bars"></i>
        </div>
        <nav class="templatemo-left-nav">
            <ul>
                <li><a href="#" class="active"><i class="fa fa-home fa-fw"></i>Dashboard</a></li>
                <li><a href="/datav"><i class="fa fa-bar-chart fa-fw"></i>Statistiques</a></li>
                <li><a href="/map"><i class="fa fa-map-marker fa-fw"></i>Maps</a></li>
                <li><a href="/utilisateurs"><i class="fa fa-user fa-fw"></i>utilisateurs</a></li>
                <li><a href="/programmes"><i class="fa fa-flag fa-fw"></i>programmes</a></li>
                <li><a href="/evenements"><i class="fa fa fa-calendar fa-fw"></i>evenements</a></li>
                <li><a href="/sponsors"><i class="fa fa-building fa-fw"></i>sponsors</a></li>
                <li><a href="/locaux"><i class="fa fa-location-arrow fa-fw"></i>locaux</a></li>
                <li><a href="/categories"><i class="fa fa-tags fa-fw"></i>categories</a></li>
                <li><a href="/produits"><i class="fa fa-tags fa-fw"></i>produits</a></li>
                <li><a href="/commandes"><i class="fa fa-cart-arrow-down fa-fw"></i>commandes</a></li>
                <li><a href="/livraisons"><i class="fa fa-truck fa-fw"></i>livraisons</a></li>
                <li><a href="/livreurs"><i class="fa fa-male fa-fw"></i>livreurs</a></li>
                <li><a href="/transporteur"><i class="fa fa-male fa-fw"></i>transporteur</a></li>
                <li><a href="/alertes"><i class="fa fa-bullhorn fa-fw"></i>alertes</a></li>
                <li><a href="/reclamations"><i class="fa fa-comments fa-fw"></i>reclamations</a></li>
                <li><a href="/login"><i class="fa fa-eject fa-fw"></i>Sign Out</a></li>
            </ul>
        </nav>
    </div>
    <!-- Main content -->
    <div class="templatemo-content col-1 light-gray-bg">
        <div class="templatemo-top-nav-container">
            <div class="row">
                <nav class="templatemo-top-nav col-lg-12 col-md-12">
                    <ul class="text-uppercase">
                        <li><a href="/blog" class="active">Admin ... </a></li>
                        <li><a href="/profile">Profile</a></li>
                        <li><a href="/listutili">Administrateurs</a></li>
                        <li><a href="/datav">Statistiques</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="templatemo-content-container">
            <div class="templatemo-content-widget no-padding">
                <div class="panel panel-default table-responsive">
                    <table class="table table-striped table-bordered templatemo-user-table">
                        <thead>
                        <tr>

                            <td><a href="" class="white-text templatemo-sort-by">#ID <span class="caret"></span></a></td>
                            <td><a href="" class="white-text templatemo-sort-by">Client <span class="caret"></span></a></td>
                            <td><a href="" class="white-text templatemo-sort-by">Date <span class="caret"></span></a></td>
                            <td><a href="" class="white-text templatemo-sort-by">Quantite <span class="caret"></span></a></td>
                            <td><a href="" class="white-text templatemo-sort-by">Profit <span class="caret"></span></a></td>
                            <td><a href="" class="white-text templatemo-sort-by">Produit <span class="caret"></span></a></td>
                            <td>Delete</td>
                        </tr>
                        </thead>
                        {% for com in commandes%}
                        <tr>
                            <td>{{com.id}}</td>
                            <td>{{ com.utilisateur.nom }}</td>
                            <td>{{ com.dateCommande|date("m/d/Y")}}</td>
                            <td>{{ com.quantite }}</td>
                            <td>{{ com.prix }}</td>
                            <td>{{ com.produit.nom }}</td>
                            <td><a href="{{ path("delcom",{'id':com.id}) }}" class="templatemo-link">Delete</a></td>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
            <div class="panel panel-default no-border">
                <div class="panel-heading border-radius-10">
                    <h2>Area Chart</h2>
                </div>
                <div class="panel-body">
                    <div class="templatemo-flex-row flex-content-row">
                        <div class="col-1">
                            <div id="area_chart_div" class="templatemo-chart"></div>
                            <h3 class="text-center margin-bottom-5">Company Performance</h3>
                            <p class="text-center">Fusce mi lacus</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        </div>
    </div>
{% set packages = [1, 2, 3, 4] %}

    <!-- JS -->
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>        <!-- jQuery -->
    <script type="text/javascript" src="js/bootstrap-filestyle.min.js"></script>  <!-- http://markusslima.github.io/bootstrap-filestyle/ -->
    <script type="text/javascript" src="js/templatemo-script.js"></script>        <!-- Templatemo Script -->
    <script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>      <!-- jQuery -->
    <script type="text/javascript" src="js/jquery-migrate-1.2.1.min.js"></script> <!--  jQuery Migrate Plugin -->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script> <!-- Google Chart -->
    <script>
        var gaugeChart;
        var gaugeData;
        var gaugeOptions;
        var timelineChart;
        var timelineDataTable;
        var timelineOptions;
        var areaData;
        var areaOptions;
        var areaChart;

        /* Gauage
        --------------------------------------------------*/

        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);

        $(document).ready(function(){
            if($.browser.mozilla) {
                //refresh page on browser resize
                // http://www.sitepoint.com/jquery-refresh-page-browser-resize/
                $(window).bind('resize', function(e)
                {
                    if (window.RT) clearTimeout(window.RT);
                    window.RT = setTimeout(function()
                    {
                        this.location.reload(false); /* false to get page from cache */
                    }, 200);
                });
            } else {
                $(window).resize(function(){
                    drawCharts();
                });
            }
        });


        /* Area Chart
        --------------------------------------------------*/
       async function drawChart() {
   var res =      await   axios.get("http://127.0.0.1:8000/affcommandes");
  var array =  res.data.map(x=>[x[0],parseInt(x[1])]);
   console.log(array);
array.unshift(['Date', 'Sales'])
                areaData = google.visualization.arrayToDataTable(
                array
            );

            areaOptions = {
                title: 'Company Performance',
                hAxis: {title: 'Date',  titleTextStyle: {color: '#333'}},
                vAxis: {minValue: 0}
            };

            areaChart = new google.visualization.AreaChart(document.getElementById('area_chart_div'));
            areaChart.draw(areaData, areaOptions);
        } // End function drawChart

        function drawCharts () {
            gaugeChart.draw(gaugeData, gaugeOptions);
            timelineChart.draw(timelineDataTable, timelineOptions);
            areaChart.draw(areaData, areaOptions);
        }

    </script>
    <script type="text/javascript" src="js/templatemo-script.js"></script>
</body>
</html>
